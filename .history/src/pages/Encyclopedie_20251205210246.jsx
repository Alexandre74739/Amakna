import { useState, useEffect } from "react"; import { useNavigate } from "react-router-dom"; import Buttons from "../components/Buttons"; import pandora from "../assets/pandora.png"; import "./Encyclopedie.scss"; function Encyclopedie() { const [search, setSearch] = useState(""); const [personnages, setPersonnages] = useState([]); const navigate = useNavigate(); // --- Récupération des personnages depuis l'API --- useEffect(() => { fetch("http://localhost:5000/api/personnages") .then(res => res.json()) .then(data => setPersonnages(data)) .catch(err => console.error("Erreur API :", err)); }, []); const filtered = personnages.filter(p => p.name.toLowerCase().includes(search.toLowerCase()) ); return ( <div className="encyclopedie"> <h1>Amakna</h1> <h2>Découvrez les mystères du monde et de ses héros</h2> <img className="pandora" src={pandora} alt="pandora" /> <input type="text" className="search-bar" placeholder="Rechercher un personnage..." onChange={(e) => setSearch(e.target.value)} /> <div className="cards-container"> {filtered.map((item) => ( <div className="card" key={item.id}> <img src={item.image} // récupéré depuis l'API alt={item.name} onClick={() => navigate(/personnage/${item.id})} /> </div> ))} </div> <Buttons /> </div> ); } export default Encyclopedie;